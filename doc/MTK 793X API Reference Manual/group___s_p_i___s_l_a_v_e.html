<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MT7933 API Reference: SPI_SLAVE</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MT7933 API Reference
   &#160;<span id="projectnumber">MTK BSP v0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group___s_p_i___s_l_a_v_e.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">SPI_SLAVE<div class="ingroups"><a class="el" href="group___h_a_l.html">HAL</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This section introduces the Serial Peripheral Interface (SPI) Slave APIs including terms and acronyms, supported features, software architecture, details on how to use this driver, enums, structures and functions.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>This section introduces the Serial Peripheral Interface (SPI) Slave APIs including terms and acronyms, supported features, software architecture, details on how to use this driver, enums, structures and functions. </p>
<h1><a class="anchor" id="HAL_SPI_SLAVE_Terms_Chapter"></a>
Terms and acronyms</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Terms  </th><th class="markdownTableHeadNone">Details   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>DMA</b>  </td><td class="markdownTableBodyNone">Direct Memory Access. DMA is a feature of computer systems that allows certain hardware subsystems to access main system memory independent from the central processing unit (CPU).   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>GPIO</b>  </td><td class="markdownTableBodyNone">General Purpose Inputs-Outputs. For more details, please refer to <a class="el" href="group___g_p_i_o.html">GPIO</a>.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>IRQ</b>  </td><td class="markdownTableBodyNone">Interrupt Request. For more information, please refer to <a href="https://en.wikipedia.org/wiki/Interrupt_request_(PC_architecture)">IRQ</a>.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>MISO</b>  </td><td class="markdownTableBodyNone">Master Input, Slave Output. Output from the SPI slave.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>MOSI</b>  </td><td class="markdownTableBodyNone">Master Output, Slave Input. Output from the SPI master.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>NVIC</b>  </td><td class="markdownTableBodyNone">Nested Vectored Interrupt Controller. NVIC is the interrupt controller of ARM Cortex-M series processors. For more details, please refer to <a href="http://infocenter.arm.com/help/topic/com.arm.doc.100166_0001_00_en/arm_cortexm4_processor_trm_100166_0001_00_en.pdf">ARM Cortex-M4 technical reference manual</a>.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>SCLK</b>  </td><td class="markdownTableBodyNone">Serial Clock. Output from the SPI master.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>SPI</b>  </td><td class="markdownTableBodyNone">Serial Peripheral Interface. The SPI bus is a synchronous serial communication interface specification used for short distance communication. For more information, please refer to <a href="https://en.wikipedia.org/wiki/Serial_peripheral_interface">Serial Peripheral Interface Bus in Wikipedia</a>.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>SS</b>  </td><td class="markdownTableBodyNone">Slave Select. Output from the SPI master, active low.   </td></tr>
</table>
<h1><a class="anchor" id="HAL_SPI_SLAVE_Driver_Usage_Chapter"></a>
How to use this driver</h1>
<ul>
<li><b>Using</b> <b>the</b> <b>SPI</b> <b>slave</b>. Call <a class="el" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723" title="This function configures the pinmux of target GPIO.">hal_pinmux_set_function()</a> to pinmux GPIO pins to four SPI pins (SS, SCLK, MOSI, and MISO) based on the user's hardware platform design. Once a transaction is complete, call <a class="el" href="group___s_p_i___s_l_a_v_e.html#gabe70c37de962b5c9f7fe73bbc1bb8b83" title="This function resets the SPI slave, gates its clock and disables interrupts.">hal_spi_slave_deinit()</a> function to release the SPI slave resource to make it available for other users. The steps are shown below:<ul>
<li>Step 1. Call <a class="el" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d" title="This function initializes the GPIO hardware with basic functionality.">hal_gpio_init()</a> to init the pins, if EPT tool hasn't been used to configure the related pinmux.</li>
<li>Step 2. Call <a class="el" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723" title="This function configures the pinmux of target GPIO.">hal_pinmux_set_function()</a> to set the GPIO pinmux, if the EPT tool hasn't been used to configure the related pinmux. For more details about <a class="el" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723" title="This function configures the pinmux of target GPIO.">hal_pinmux_set_function()</a>, please refer to <a class="el" href="group___g_p_i_o.html">GPIO</a>.</li>
<li>Step 3. Call <a class="el" href="group___s_p_i___s_l_a_v_e.html#gaa977b5ad2693071802c52bbda5a7898d" title="This function initializes the SPI slave and sets user defined common parameters such as timeout thres...">hal_spi_slave_init()</a> to initialize one SPI slave.</li>
<li>Step 4. Call <a class="el" href="group___s_p_i___s_l_a_v_e.html#gae9533bf2fe55540dc4ac1daa0bbd1e86" title="This function registers user&#39;s callback in the SPI slave driver.">hal_spi_slave_register_callback()</a> to register a user callback.</li>
<li>Step 5. Call <a class="el" href="group___s_p_i___s_l_a_v_e.html#ga3eeb691c407822795741c294fe836c7a" title="This function queries the address and length from the config read command sent by the SPI master.">hal_spi_slave_receive()</a> to receive data.</li>
<li>Step 6. Call <a class="el" href="group___s_p_i___s_l_a_v_e.html#ga7a6a6f4bcd5482888f0bd93699123601" title="This function send and receives data asynchronously.">hal_spi_slave_send_and_receive()</a> to send and receive data.</li>
<li>Step 7. Call <a class="el" href="group___s_p_i___s_l_a_v_e.html#gabe70c37de962b5c9f7fe73bbc1bb8b83" title="This function resets the SPI slave, gates its clock and disables interrupts.">hal_spi_slave_deinit()</a> to deinitialize the SPI slave that is no longer in use.</li>
<li>sample code: <div class="fragment"><div class="line">uint16_t slave_status;</div><div class="line"><a class="code" href="structhal__spi__slave__config__t.html">hal_spi_slave_config_t</a> spi_configure;</div><div class="line">uint8_t *data, *buffer;</div><div class="line">uint32_t size;</div></div><!-- fragment --> <div class="fragment"><div class="line"><span class="comment">// Initialize the GPIO, set GPIO pinmux (if EPT tool hasn&#39;t been used to configure the related pinmux).</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d">hal_gpio_init</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daa8712b0beaeb6d6c3b615e2ebe27cdca9">HAL_GPIO_25</a>);</div><div class="line"><a class="code" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d">hal_gpio_init</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daac920829237cdc41b9004216595196703">HAL_GPIO_26</a>);</div><div class="line"><a class="code" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d">hal_gpio_init</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daad6e787b006357d37425a1202449c426d">HAL_GPIO_27</a>);</div><div class="line"><a class="code" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d">hal_gpio_init</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daaccddeb5915ef59d712fe60d643b0d3da">HAL_GPIO_28</a>);</div><div class="line"><span class="comment">// Call hal_pinmux_set_function() to set GPIO pinmux, for more information, please refer to hal_pinmux_define.h</span></div><div class="line"><span class="comment">// Not need to configure the pinmux, if EPT is used.</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723">hal_pinmux_set_function</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daa8712b0beaeb6d6c3b615e2ebe27cdca9">HAL_GPIO_25</a>, 7);<span class="comment">// Set the pin to be used as SCK signal of SPI Slave.</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723">hal_pinmux_set_function</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daac920829237cdc41b9004216595196703">HAL_GPIO_26</a>, 7);<span class="comment">// Set the pin to be used as CS signal of SPI Slave.</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723">hal_pinmux_set_function</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daad6e787b006357d37425a1202449c426d">HAL_GPIO_27</a>, 7);<span class="comment">// Set the pin to be used as MOSI signal of SPI Slave.</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723">hal_pinmux_set_function</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daaccddeb5915ef59d712fe60d643b0d3da">HAL_GPIO_28</a>, 5);<span class="comment">// Set the pin to be used as MISO signal of SPI Slave.</span></div></div><!-- fragment --> <div class="fragment"><div class="line">spi_configure.<a class="code" href="structhal__spi__slave__config__t.html#aa095791cb53c22ff6e819f30ae8cde9d">bit_order</a> = <a class="code" href="group__hal__spi__slave__enum.html#gga0acb328cc34aef8b1f2216aa45790f7fa6b403b1be66d4c0af04ce132b48c7102">HAL_SPI_SLAVE_LSB_FIRST</a>;</div><div class="line">spi_configure.<a class="code" href="structhal__spi__slave__config__t.html#a2cce0ed88ee3d7e72349a47474c5de88">phase</a> = <a class="code" href="group__hal__spi__slave__enum.html#gga34434dca1239d3d67933d3c44d50ea81a6610f1f8b0059fc6ba6838ed8dc708df">HAL_SPI_SLAVE_CLOCK_PHASE0</a>;</div><div class="line">spi_configure.<a class="code" href="structhal__spi__slave__config__t.html#ab8ea10cc1684cfb684f2054dfed7f157">polarity</a> = <a class="code" href="group__hal__spi__slave__enum.html#gga8c4d9cf35bae2e860a899a7ef2fb3846a2cc9b475bf12d5cfae1e2da6ad1cbf41">HAL_SPI_SLAVE_CLOCK_POLARITY0</a>;</div><div class="line">spi_configure.<a class="code" href="structhal__spi__slave__config__t.html#aea9c7a0f0dcff7e5fb5c4b2829e807df">timeout_threshold</a> = 0xFFFFFFFF;</div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa3e525d05a72280ee0bfe3e284e1bbc2f">HAL_SPI_SLAVE_STATUS_OK</a> != <a class="code" href="group___s_p_i___s_l_a_v_e.html#gaa977b5ad2693071802c52bbda5a7898d">hal_spi_slave_init</a>(<a class="code" href="group__hal__spi__slave__enum.html#ggadcabf6f9919f35026e7a9d7162000a6fad81d76145fa62c0b89725dfccd4d2e6f">HAL_SPI_SLAVE_0</a>, &amp;spi_configure)) {</div><div class="line">   <span class="comment">// Error handler;</span></div><div class="line">}</div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa3e525d05a72280ee0bfe3e284e1bbc2f">HAL_SPI_SLAVE_STATUS_OK</a> != <a class="code" href="group___s_p_i___s_l_a_v_e.html#gae9533bf2fe55540dc4ac1daa0bbd1e86">hal_spi_slave_register_callback</a>(<a class="code" href="group__hal__spi__slave__enum.html#ggadcabf6f9919f35026e7a9d7162000a6fad81d76145fa62c0b89725dfccd4d2e6f">HAL_SPI_SLAVE_0</a>, user_spi_slave_callback, NULL)) {</div><div class="line">   <span class="comment">// Error handler;</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa3e525d05a72280ee0bfe3e284e1bbc2f">HAL_SPI_SLAVE_STATUS_OK</a> != <a class="code" href="group___s_p_i___s_l_a_v_e.html#ga3eeb691c407822795741c294fe836c7a">hal_spi_slave_receive</a>(<a class="code" href="group__hal__spi__slave__enum.html#ggadcabf6f9919f35026e7a9d7162000a6fad81d76145fa62c0b89725dfccd4d2e6f">HAL_SPI_SLAVE_0</a>, buffer, size)) {</div><div class="line">   <span class="comment">// Error handler;</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa3e525d05a72280ee0bfe3e284e1bbc2f">HAL_SPI_SLAVE_STATUS_OK</a> != <a class="code" href="group___s_p_i___s_l_a_v_e.html#ga7a6a6f4bcd5482888f0bd93699123601">hal_spi_slave_send_and_receive</a>(<a class="code" href="group__hal__spi__slave__enum.html#ggadcabf6f9919f35026e7a9d7162000a6fad81d76145fa62c0b89725dfccd4d2e6f">HAL_SPI_SLAVE_0</a>, data, buffer, size)) {</div><div class="line">   <span class="comment">// Error handler;</span></div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group___s_p_i___s_l_a_v_e.html#gabe70c37de962b5c9f7fe73bbc1bb8b83">hal_spi_slave_deinit</a>(<a class="code" href="group__hal__spi__slave__enum.html#ggadcabf6f9919f35026e7a9d7162000a6fad81d76145fa62c0b89725dfccd4d2e6f">HAL_SPI_SLAVE_0</a>);</div></div><!-- fragment --> <div class="fragment"><div class="line"><span class="comment">// Callback function sample code. Pass this function to the driver, while calling #hal_spi_slave_register_callback().</span></div><div class="line"><a class="code" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a> user_spi_slave_callback (<a class="code" href="structhal__spi__slave__transaction__status__t.html">hal_spi_slave_transaction_status_t</a> status,<span class="keywordtype">void</span> *user_data)</div><div class="line">{</div><div class="line"> <span class="comment">//interrupt handler;</span></div><div class="line">}</div></div><!-- fragment --></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="HAL_SPI_SLAVE_Pin_Driving_Adjust_Guide_Chapter"></a>
How to adjust the driving current of the SPI slave</h1>
<p>When the SPI slave is operating on high frequency clock and the hardware environment is not well designed, the SPI slave may malfunction because of bad signal integrity. Use an oscilloscope to find out which pin requires an adjustment. Normally it'll be the data pin. Then the user can adjust the driving current of a specific SPI pin by calling <a class="el" href="group___g_p_i_o.html#ga4f2b9732372813716c994140f8758580" title="This function sets the driving current of the target GPIO.">hal_gpio_set_driving_current()</a>.</p><ul>
<li>sample code: <div class="fragment"><div class="line"><span class="comment">// To adjust the MISO pin (corresponds to GPIO28) of the SPI slave, call #hal_gpio_init(),</span></div><div class="line"><span class="comment">// then #hal_pinmux_set_function() to initialize this SPI pin.</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga19985c2e5d4b22d47d08103be800331d">hal_gpio_init</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daaccddeb5915ef59d712fe60d643b0d3da">HAL_GPIO_28</a>);</div><div class="line"><a class="code" href="group___g_p_i_o.html#ga54dd22211d970fb607bf172a71dca723">hal_pinmux_set_function</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daaccddeb5915ef59d712fe60d643b0d3da">HAL_GPIO_28</a>, 5);</div><div class="line"><span class="comment">// Then call #hal_gpio_set_driving_current() to set the proper driving current for this SPI pin.</span></div><div class="line"><a class="code" href="group___g_p_i_o.html#ga4f2b9732372813716c994140f8758580">hal_gpio_set_driving_current</a>(<a class="code" href="group__hal__gpio__enum.html#gga8793dd0b4f544f610264c026357bf6daaccddeb5915ef59d712fe60d643b0d3da">HAL_GPIO_28</a>, HAL_GPIO_DRIVING_8MA);</div><div class="line"><span class="comment">// Call #hal_spi_slave_init() to initialize the SPI slave.</span></div><div class="line"><a class="code" href="group___s_p_i___s_l_a_v_e.html#gaa977b5ad2693071802c52bbda5a7898d">hal_spi_slave_init</a>(<a class="code" href="group__hal__spi__slave__enum.html#ggadcabf6f9919f35026e7a9d7162000a6fad81d76145fa62c0b89725dfccd4d2e6f">HAL_SPI_SLAVE_0</a> ,&amp;spi_config);</div></div><!-- fragment --> </li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa977b5ad2693071802c52bbda5a7898d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i___s_l_a_v_e.html#gaa977b5ad2693071802c52bbda5a7898d">hal_spi_slave_init</a> (<a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f">hal_spi_slave_port_t</a> spi_port, <a class="el" href="structhal__spi__slave__config__t.html">hal_spi_slave_config_t</a> *spi_configure)</td></tr>
<tr class="memdesc:gaa977b5ad2693071802c52bbda5a7898d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes the SPI slave and sets user defined common parameters such as timeout threshold, bit order, clock polarity and clock phase.  <a href="#gaa977b5ad2693071802c52bbda5a7898d">More...</a><br /></td></tr>
<tr class="separator:gaa977b5ad2693071802c52bbda5a7898d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe70c37de962b5c9f7fe73bbc1bb8b83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i___s_l_a_v_e.html#gabe70c37de962b5c9f7fe73bbc1bb8b83">hal_spi_slave_deinit</a> (<a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f">hal_spi_slave_port_t</a> spi_port)</td></tr>
<tr class="memdesc:gabe70c37de962b5c9f7fe73bbc1bb8b83"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function resets the SPI slave, gates its clock and disables interrupts.  <a href="#gabe70c37de962b5c9f7fe73bbc1bb8b83">More...</a><br /></td></tr>
<tr class="separator:gabe70c37de962b5c9f7fe73bbc1bb8b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9533bf2fe55540dc4ac1daa0bbd1e86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i___s_l_a_v_e.html#gae9533bf2fe55540dc4ac1daa0bbd1e86">hal_spi_slave_register_callback</a> (<a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f">hal_spi_slave_port_t</a> spi_port, <a class="el" href="group__hal__spi__slave__typedef.html#ga74bfe486a36c05e5b057224212f78a8b">hal_spi_slave_callback_t</a> callback_function, void *user_data)</td></tr>
<tr class="memdesc:gae9533bf2fe55540dc4ac1daa0bbd1e86"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function registers user's callback in the SPI slave driver.  <a href="#gae9533bf2fe55540dc4ac1daa0bbd1e86">More...</a><br /></td></tr>
<tr class="separator:gae9533bf2fe55540dc4ac1daa0bbd1e86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a6a6f4bcd5482888f0bd93699123601"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i___s_l_a_v_e.html#ga7a6a6f4bcd5482888f0bd93699123601">hal_spi_slave_send_and_receive</a> (<a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f">hal_spi_slave_port_t</a> spi_port, const uint8_t *tx_buf, uint8_t *rx_buf, uint32_t size)</td></tr>
<tr class="memdesc:ga7a6a6f4bcd5482888f0bd93699123601"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function send and receives data asynchronously.  <a href="#ga7a6a6f4bcd5482888f0bd93699123601">More...</a><br /></td></tr>
<tr class="separator:ga7a6a6f4bcd5482888f0bd93699123601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3eeb691c407822795741c294fe836c7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i___s_l_a_v_e.html#ga3eeb691c407822795741c294fe836c7a">hal_spi_slave_receive</a> (<a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f">hal_spi_slave_port_t</a> spi_port, uint8_t *buffer, uint32_t size)</td></tr>
<tr class="memdesc:ga3eeb691c407822795741c294fe836c7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function queries the address and length from the config read command sent by the SPI master.  <a href="#ga3eeb691c407822795741c294fe836c7a">More...</a><br /></td></tr>
<tr class="separator:ga3eeb691c407822795741c294fe836c7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__hal__spi__slave__enum"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__spi__slave__enum.html">Enum</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__hal__spi__slave__struct"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__spi__slave__struct.html">Struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__hal__spi__slave__typedef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__spi__slave__typedef.html">Typedef</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="gabe70c37de962b5c9f7fe73bbc1bb8b83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe70c37de962b5c9f7fe73bbc1bb8b83">&#9670;&nbsp;</a></span>hal_spi_slave_deinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a> hal_spi_slave_deinit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f">hal_spi_slave_port_t</a>&#160;</td>
          <td class="paramname"><em>spi_port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function resets the SPI slave, gates its clock and disables interrupts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">spi_port</td><td>is the SPI slave port number, the value is defined at <a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f" title="This enum defines the SPI slave port.">hal_spi_slave_port_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa5d1338fdd243dd0d270c4ed38cc2d173" title="Invalid SPI slave port number.">HAL_SPI_SLAVE_STATUS_ERROR_PORT</a>, if the SPI slave port is invalid. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa3e525d05a72280ee0bfe3e284e1bbc2f" title="The SPI slave API call was successful.">HAL_SPI_SLAVE_STATUS_OK</a>, if this function returned successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code please refers to <a class="el" href="group___s_p_i___s_l_a_v_e.html#HAL_SPI_SLAVE_Driver_Usage_Chapter">How to use this driver</a>. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___s_p_i___s_l_a_v_e.html#gaa977b5ad2693071802c52bbda5a7898d" title="This function initializes the SPI slave and sets user defined common parameters such as timeout thres...">hal_spi_slave_init()</a> </dd></dl>

</div>
</div>
<a id="gaa977b5ad2693071802c52bbda5a7898d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa977b5ad2693071802c52bbda5a7898d">&#9670;&nbsp;</a></span>hal_spi_slave_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a> hal_spi_slave_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f">hal_spi_slave_port_t</a>&#160;</td>
          <td class="paramname"><em>spi_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhal__spi__slave__config__t.html">hal_spi_slave_config_t</a> *&#160;</td>
          <td class="paramname"><em>spi_configure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function initializes the SPI slave and sets user defined common parameters such as timeout threshold, bit order, clock polarity and clock phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">spi_port</td><td>is the SPI slave port number, the value is defined at <a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f" title="This enum defines the SPI slave port.">hal_spi_slave_port_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">spi_configure</td><td>is the SPI slave configure parameters. Details are described at <a class="el" href="structhal__spi__slave__config__t.html" title="SPI slave configure.">hal_spi_slave_config_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa32e2ba36a35137d483118cd741477a70" title="An error occurred during the SPI slave API call.">HAL_SPI_SLAVE_STATUS_ERROR</a>, if the SPI slave port is in use. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa6e73cde2e447f6833da48f4a41926c99" title="The SPI slave was busy during the SPI slave API call.">HAL_SPI_SLAVE_STATUS_ERROR_BUSY</a>, if the SPI slave port is busy and not available for use; <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa5d1338fdd243dd0d270c4ed38cc2d173" title="Invalid SPI slave port number.">HAL_SPI_SLAVE_STATUS_ERROR_PORT</a>, if the SPI slave port is invalid. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa80fd60b5cbd3b5516813cda81ffc6d80" title="Invalid parameter.">HAL_SPI_SLAVE_STATUS_INVALID_PARAMETER</a>, if an invalid parameter is given by user. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa3e525d05a72280ee0bfe3e284e1bbc2f" title="The SPI slave API call was successful.">HAL_SPI_SLAVE_STATUS_OK</a>, if this function returned successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code please refers to <a class="el" href="group___s_p_i___s_l_a_v_e.html#HAL_SPI_SLAVE_Driver_Usage_Chapter">How to use this driver</a>. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___s_p_i___s_l_a_v_e.html#gabe70c37de962b5c9f7fe73bbc1bb8b83" title="This function resets the SPI slave, gates its clock and disables interrupts.">hal_spi_slave_deinit()</a> </dd></dl>

</div>
</div>
<a id="ga3eeb691c407822795741c294fe836c7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3eeb691c407822795741c294fe836c7a">&#9670;&nbsp;</a></span>hal_spi_slave_receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a> hal_spi_slave_receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f">hal_spi_slave_port_t</a>&#160;</td>
          <td class="paramname"><em>spi_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function queries the address and length from the config read command sent by the SPI master. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">spi_port</td><td>is the SPI slave port number, the value is defined at <a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f" title="This enum defines the SPI slave port.">hal_spi_slave_port_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>is the address of data to read from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>is the data length to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa5d1338fdd243dd0d270c4ed38cc2d173" title="Invalid SPI slave port number.">HAL_SPI_SLAVE_STATUS_ERROR_PORT</a>, if the SPI slave port is invalid. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa80fd60b5cbd3b5516813cda81ffc6d80" title="Invalid parameter.">HAL_SPI_SLAVE_STATUS_INVALID_PARAMETER</a>, if an invalid parameter is given by user. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa32e2ba36a35137d483118cd741477a70" title="An error occurred during the SPI slave API call.">HAL_SPI_SLAVE_STATUS_ERROR</a>, if the address and length of data cannot be queried. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa3e525d05a72280ee0bfe3e284e1bbc2f" title="The SPI slave API call was successful.">HAL_SPI_SLAVE_STATUS_OK</a>, if this function returned successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a> user_spi_slave_callback(<a class="code" href="structhal__spi__slave__transaction__status__t.html">hal_spi_slave_transaction_status_t</a> status,<span class="keywordtype">void</span> *user_data)</div><div class="line">{</div><div class="line"></div><div class="line">    <a class="code" href="group__hal__spi__slave__enum.html#gaa00253660bfa04e543221fbe06e1307f">hal_spi_slave_callback_event_t</a> slave_status;</div><div class="line">    uint32_t request_address, request_length;</div><div class="line">    uint32_t actual_address, actual_length;</div><div class="line">    <span class="keywordtype">bool</span> need_convert;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__hal__spi__slave__enum.html#gga60ae56370f4787ff33dd2234a17dad7da0992deb6893e3a2c601c52145481bf44">HAL_SPI_SLAVE_FSM_SUCCESS_OPERATION</a> == (status.<a class="code" href="structhal__spi__slave__transaction__status__t.html#a97ce27e75f77f9b2a3a1c7c1328eb6ae">fsm_status</a>)) {</div><div class="line">         slave_status = status.<a class="code" href="structhal__spi__slave__transaction__status__t.html#adaa0649b60f4dfb08f0adf6561450c9e">interrupt_status</a>;</div><div class="line">         <span class="keywordflow">switch</span> (slave_status) {</div><div class="line">         <span class="keywordflow">case</span> <a class="code" href="group__hal__spi__slave__enum.html#ggaa00253660bfa04e543221fbe06e1307fa716b2e3915aae65a06bcf0eec38c97cc">HAL_SPI_SLAVE_EVENT_CRD_FINISH</a>:</div><div class="line">             hal_spi_slave_get_master_read_config(<a class="code" href="group__hal__spi__slave__enum.html#ggadcabf6f9919f35026e7a9d7162000a6fad81d76145fa62c0b89725dfccd4d2e6f">HAL_SPI_SLAVE_0</a>, &amp;request_address, &amp;request_length);</div><div class="line">             need_convert = user_check_convert(); <span class="comment">// User decides whether to convert the requested address to an actual address.</span></div><div class="line">             <span class="keywordflow">if</span> (need_convert == <span class="keyword">true</span>) {</div><div class="line">                 actual_address = user_convert_address(request_address, request_length); <span class="comment">// Convert the requested address to an actual.</span></div><div class="line">             }</div><div class="line">             <span class="keywordflow">else</span> {</div><div class="line">                 actual_address = request_address; <span class="comment">// Use the requested address as an actual address.</span></div><div class="line">             }</div><div class="line">             actual_length = request_length; <span class="comment">// Actual length should always be the same as the requested length.</span></div><div class="line">             user_prepare_buffer(actual_address, actual_length); <span class="comment">// Prepare a buffer before sending or receiving data.</span></div><div class="line">             hal_spi_slave_send(<a class="code" href="group__hal__spi__slave__enum.html#ggadcabf6f9919f35026e7a9d7162000a6fad81d76145fa62c0b89725dfccd4d2e6f">HAL_SPI_SLAVE_0</a>, (uint8_t *)actual_address, actual_length);</div><div class="line">             <span class="keywordflow">break</span>;</div><div class="line">         <span class="comment">// Other event handler;</span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --></dd></dl>
<dl class="section see"><dt>See also</dt><dd>#hal_spi_slave_send()This function receives data asynchronously. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">spi_port</td><td>is the SPI slave port number, the value is defined at <a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f" title="This enum defines the SPI slave port.">hal_spi_slave_port_t</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>is the data buffer where the received data are stored, this parameter cannot be NULL, also the address must be as non-cacheable address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>is the number of bytes to receive. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa5d1338fdd243dd0d270c4ed38cc2d173" title="Invalid SPI slave port number.">HAL_SPI_SLAVE_STATUS_ERROR_PORT</a>, if the SPI slave port is invalid. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa80fd60b5cbd3b5516813cda81ffc6d80" title="Invalid parameter.">HAL_SPI_SLAVE_STATUS_INVALID_PARAMETER</a>, if an invalid parameter is given by user. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa3e525d05a72280ee0bfe3e284e1bbc2f" title="The SPI slave API call was successful.">HAL_SPI_SLAVE_STATUS_OK</a>, if this function returned successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code please refers to <a class="el" href="group___s_p_i___s_l_a_v_e.html#HAL_SPI_SLAVE_Driver_Usage_Chapter">How to use this driver</a>.</dd></dl>
<dl class="section see"><dt>See also</dt><dd>#hal_spi_slave_get_master_write_config() </dd></dl>

</div>
</div>
<a id="gae9533bf2fe55540dc4ac1daa0bbd1e86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9533bf2fe55540dc4ac1daa0bbd1e86">&#9670;&nbsp;</a></span>hal_spi_slave_register_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a> hal_spi_slave_register_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f">hal_spi_slave_port_t</a>&#160;</td>
          <td class="paramname"><em>spi_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__hal__spi__slave__typedef.html#ga74bfe486a36c05e5b057224212f78a8b">hal_spi_slave_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback_function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function registers user's callback in the SPI slave driver. </p>
<p>This function should always be called when using the SPI slave driver, the callback will be called in SPI ISR. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">spi_port</td><td>is the SPI slave port number, the value is defined at <a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f" title="This enum defines the SPI slave port.">hal_spi_slave_port_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback_function</td><td>is the callback function given by user, which will be called at SPI slave interrupt service routine. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user_data</td><td>is a parameter given by user and will pass to user while the callback function is called. See the last parameter of <a class="el" href="group__hal__spi__slave__typedef.html#ga74bfe486a36c05e5b057224212f78a8b" title="This defines the callback function prototype.">hal_spi_slave_callback_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa5d1338fdd243dd0d270c4ed38cc2d173" title="Invalid SPI slave port number.">HAL_SPI_SLAVE_STATUS_ERROR_PORT</a>, if the SPI slave port is invalid. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa80fd60b5cbd3b5516813cda81ffc6d80" title="Invalid parameter.">HAL_SPI_SLAVE_STATUS_INVALID_PARAMETER</a>, if an invalid parameter is given by user. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa3e525d05a72280ee0bfe3e284e1bbc2f" title="The SPI slave API call was successful.">HAL_SPI_SLAVE_STATUS_OK</a>, if this function returned successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code please refer to <a class="el" href="group___s_p_i___s_l_a_v_e.html#HAL_SPI_SLAVE_Driver_Usage_Chapter">How to use this driver</a>. </dd></dl>

</div>
</div>
<a id="ga7a6a6f4bcd5482888f0bd93699123601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7a6a6f4bcd5482888f0bd93699123601">&#9670;&nbsp;</a></span>hal_spi_slave_send_and_receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__hal__spi__slave__enum.html#gacd02b20fc0426d288f0788484ab5c96a">hal_spi_slave_status_t</a> hal_spi_slave_send_and_receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f">hal_spi_slave_port_t</a>&#160;</td>
          <td class="paramname"><em>spi_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>tx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function send and receives data asynchronously. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">spi_port</td><td>is the SPI slave port number, the value is defined at <a class="el" href="group__hal__spi__slave__enum.html#gadcabf6f9919f35026e7a9d7162000a6f" title="This enum defines the SPI slave port.">hal_spi_slave_port_t</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_buf</td><td>is the buffer of data to be sent, this parameter cannot be NULL, also the address must be as non-cacheable address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_buf</td><td>is the data buffer where the received data are stored, this parameter cannot be NULL, also the address must be as non-cacheable address. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>is the number of bytes to receive. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa5d1338fdd243dd0d270c4ed38cc2d173" title="Invalid SPI slave port number.">HAL_SPI_SLAVE_STATUS_ERROR_PORT</a>, if the SPI slave port is invalid. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa80fd60b5cbd3b5516813cda81ffc6d80" title="Invalid parameter.">HAL_SPI_SLAVE_STATUS_INVALID_PARAMETER</a>, if an invalid parameter is given by user. <br />
 <a class="el" href="group__hal__spi__slave__enum.html#ggacd02b20fc0426d288f0788484ab5c96aa3e525d05a72280ee0bfe3e284e1bbc2f" title="The SPI slave API call was successful.">HAL_SPI_SLAVE_STATUS_OK</a>, if this function returned successfully. </dd></dl>
<dl class="section user"><dt>Example</dt><dd>Sample code please refers to <a class="el" href="group___s_p_i___s_l_a_v_e.html#HAL_SPI_SLAVE_Driver_Usage_Chapter">How to use this driver</a>. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Jan 31 2023 15:25:38 for MT7933 API Reference by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
